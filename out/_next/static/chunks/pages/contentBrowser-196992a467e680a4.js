(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{9748:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contentBrowser",function(){return n(9675)}])},8435:function(e,t,n){"use strict";var r=n(5893);n(7294);var a=n(2653),l=n(8069),i=n(4246),o=n(8163),s=n(3367),c=n(1664),d=n.n(c),h=n(2140),u=n(6820),m=n(1932);t.Z=()=>{let{toggleTheme:e,theme:t}=(0,h.T)();return(0,r.jsx)(a.Z,{position:"fixed",style:{backgroundColor:t.palette.background.paper,color:t.palette.text.primary},children:(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(i.Z,{variant:"h6",style:{flexGrow:1,paddingRight:"2.5vw",paddingLeft:"5vw"},children:"Admin Panel"}),(0,r.jsx)(o.Z,{color:"inherit",children:(0,r.jsx)(d(),{href:"/contentBrowser",style:{color:"inherit",textDecoration:"none"},children:"Content"})}),(0,r.jsx)(s.Z,{color:"inherit",onClick:e,style:{marginRight:"5vw",marginLeft:"2.5vw"},children:"dark"===t.palette.mode?(0,r.jsx)(m.Z,{}):(0,r.jsx)(u.Z,{})})]})})}},9713:function(e,t,n){"use strict";var r=n(5893);n(7294);var a=n(11),l=n(7127);let i=e=>(0,r.jsx)("img",{...e,style:{maxWidth:"100%",height:"auto",borderRadius:"8px"}}),o=e=>(0,r.jsx)("a",{...e,target:"_blank",rel:"noopener noreferrer",style:{color:"#1a73e8",textDecoration:"none",fontWeight:"bold"}});t.Z=e=>{let{content:t}=e;return(0,r.jsx)("div",{style:{padding:"16px",height:"100%",overflow:"auto",maxWidth:"800px",margin:"0 auto",textAlign:"center"},children:(0,r.jsx)(a.U,{components:{img:i,a:o},remarkPlugins:[l.Z],children:t})})}},1314:function(e,t,n){"use strict";var r=n(5893);n(7294);var a=n(6722),l=n(4246),i=n(9360),o=n(8655);t.Z=e=>{let{title:t}=e,n=(0,i.Z)();return(0,r.jsx)(a.Z,{textAlign:"center",marginY:2,padding:2,paddingY:4,bgcolor:(0,o.Fq)(n.palette.background.paper,.8),color:n.palette.primary.main,marginTop:"3rem",borderRadius:1,boxShadow:4,children:(0,r.jsx)(l.Z,{variant:"h3",style:{fontWeight:"bold",letterSpacing:"1.8x"},children:t})})}},9675:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(5893),a=n(7294),l=n(6722),i=n(2419),o=n(6957),s=n(8715),c=n(1163),d=n(4246),h=n(440),u=n(8163),m=n(4934),g=n(5963),x=n(4223),p=n(7245),j=n(5687),y=e=>{let{bucketItems:t,onDelete:n,onAdd:l}=e,[i,o]=(0,a.useState)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.Z,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsxs)(u.Z,{variant:"contained",component:"label",style:{marginBottom:"1rem"},children:["Add File",(0,r.jsx)("input",{type:"file",hidden:!0,onChange:e=>{e.target.files&&e.target.files.length>0&&o(e.target.files[0])}})]}),(0,r.jsxs)(d.Z,{variant:"body1",children:["Selected File: ",null==i?void 0:i.name]}),(0,r.jsx)(u.Z,{variant:"contained",onClick:()=>{i&&(l(i),o(null))},disabled:!i,children:"Upload"})]}),(0,r.jsx)("div",{style:{maxHeight:"200px",overflowY:"auto"},children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(g.Z,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(p.Z,{children:(0,r.jsx)("strong",{children:"Key"})}),(0,r.jsx)(p.Z,{children:(0,r.jsx)("strong",{children:"Last Modified"})}),(0,r.jsx)(p.Z,{children:(0,r.jsx)("strong",{children:"Actions"})})]})}),(0,r.jsx)(j.Z,{children:t.map(e=>(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(p.Z,{children:e.Key}),(0,r.jsx)(p.Z,{children:new Date(e.LastModified).toLocaleString()}),(0,r.jsx)(p.Z,{children:(0,r.jsx)(u.Z,{variant:"outlined",color:"secondary",onClick:()=>n(e.Key),children:"Delete"})})]},e.Key))})]})})]})},f=n(1314),Z=()=>{let e=(0,c.useRouter)(),[t,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0),[s,u]=(0,a.useState)(null),m=async e=>{try{if(!(await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/delete-image"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({key:e})})).ok)throw Error("Failed to delete item");n(t=>t.filter(t=>t.Key!==e))}catch(e){console.error("Error deleting item:",e),u("Failed to delete item")}},g=async e=>{let t=new FormData;t.append("image",e);try{let e=localStorage.getItem("token"),r=await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/upload-image"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:t});if(!r.ok)throw Error("Failed to upload file");let a=await r.json();n(e=>[...e,a])}catch(e){console.error("Error uploading file:",e),u("Failed to upload file")}};return((0,a.useEffect)(()=>{let t=localStorage.getItem("token");if(!t){e.push("/admin-login");return}(async()=>{try{let e=await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/images"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!e.ok)throw Error("Failed to fetch bucket content");let r=await e.json();n(r.results)}catch(e){u("Failed to load bucket content: "+e)}finally{o(!1)}})()},[e]),i)?(0,r.jsx)(l.Z,{textAlign:"center",children:(0,r.jsx)(d.Z,{variant:"h5",children:"Loading..."})}):s?(0,r.jsx)(l.Z,{textAlign:"center",children:(0,r.jsx)(d.Z,{variant:"h5",color:"error",children:s})}):(0,r.jsxs)(h.Z,{elevation:3,style:{padding:"2rem"},children:[(0,r.jsx)(f.Z,{title:"Bucket Content"}),(0,r.jsx)(y,{bucketItems:t,onDelete:m,onAdd:g})]})},b=n(6932),v=n(2140),k=n(9332),w=n(4816),C=n(8435),S=n(8773),T=()=>{let e=(0,c.useRouter)(),[t,n]=(0,a.useState)([]);(0,a.useEffect)(()=>{let t=localStorage.getItem("token");if(!t){e.push("/admin-login");return}(async()=>{try{let e=await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/images"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});if(!e.ok)throw Error("Failed to fetch bucket content");let r=await e.json();console.log(r),n(r.results)}catch(e){console.error("Error fetching content:",e)}finally{}})()},[e]);let l=e=>{navigator.clipboard.writeText(e).then(()=>{}).catch(e=>{console.error("Failed to copy: ",e)})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(g.Z,{children:(0,r.jsx)(x.Z,{children:(0,r.jsx)(p.Z,{children:(0,r.jsx)("strong",{children:"Key"})})})}),(0,r.jsx)(j.Z,{children:t.map(e=>{let t=e.Key.length>30?"..."+e.Key.slice(-30):e.Key;return(0,r.jsx)(x.Z,{children:(0,r.jsx)(p.Z,{children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("span",{children:t}),(0,r.jsx)(S.esY,{style:{marginLeft:"8px",cursor:"pointer"},onClick:()=>l(e.Key),title:"Copy to clipboard"})]})})},e.Key)})})]})})},E=n(9713),B=e=>{let{onSubmit:t,onCancel:n,data:i}=e,[o,c]=(0,a.useState)((null==i?void 0:i.title)||""),[d]=(0,a.useState)((null==i?void 0:i.id)||0),[m,g]=(0,a.useState)((null==i?void 0:i.content)||""),[x,p]=(0,a.useState)((null==i?void 0:i.thumbnail)||""),j=(0,k.useRouter)();return(0,a.useEffect)(()=>{localStorage.getItem("token")||j.push("/admin-login")},[j]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z,{}),(0,r.jsxs)(s.Z,{style:{paddingTop:"3rem"},children:[(0,r.jsx)(f.Z,{title:i?"Edit Blog Post":"Create Blog Post"}),(0,r.jsxs)(l.Z,{display:"flex",justifyContent:"space-between",marginTop:"1rem",children:[(0,r.jsx)(l.Z,{flex:"0 0 25%",paddingRight:"1rem",children:(0,r.jsx)(T,{})}),(0,r.jsxs)(l.Z,{flex:"0 0 50%",padding:"0 1rem",children:[(0,r.jsx)(w.Z,{label:"Title",fullWidth:!0,value:o,onChange:e=>c(e.target.value),margin:"normal"}),(0,r.jsx)(w.Z,{label:"Content",fullWidth:!0,multiline:!0,rows:8,value:m,onChange:e=>g(e.target.value),margin:"normal"}),(0,r.jsx)(w.Z,{label:"Thumbnail URL",fullWidth:!0,value:x,onChange:e=>p(e.target.value),margin:"normal"}),(0,r.jsxs)(l.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem",children:[(0,r.jsx)(u.Z,{variant:"outlined",color:"secondary",onClick:n,sx:{height:"56px",fontSize:"0.875rem",padding:"6px 12px"},children:"Cancel"}),(0,r.jsx)(u.Z,{variant:"contained",color:"primary",onClick:()=>{t(d,o,m,x)},sx:{height:"56px",fontSize:"0.875rem",padding:"6px 12px"},children:i?"Update Blog Post":"Submit Blog Post"})]})]}),(0,r.jsx)(l.Z,{flex:"0 0 25%",paddingLeft:"1rem",children:(0,r.jsxs)(h.Z,{elevation:3,style:{maxHeight:"400px",overflowY:"auto"},children:[(0,r.jsx)("h3",{style:{padding:"16px"},children:"Preview"}),(0,r.jsx)(E.Z,{content:"# ".concat(o,"\n\n").concat(m)})]})})]})]})]})},I=n(1664),F=n.n(I),A=()=>{let{theme:e}=(0,v.T)(),[t,n]=(0,a.useState)([]),[l,i]=(0,a.useState)(null),[o,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{let e=await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/blogs"));n((await e.json()).results)})()},[]);let h=async(e,t,n,r)=>{console.log("Create blog:",{title:t,content:n,thumbnail:r});let a=localStorage.getItem("token");if(!a){alert("You must be logged in to create a blog post.");return}let l=n.replace(/\n/g,"\n");(await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/blogs"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({title:t,content:l,thumbnail:r})})).ok?(alert("Blog post created successfully!"),console.log(l)):alert("Error creating blog post"),c(!1)},y=async e=>{console.log("Delete blog:",e);let t=localStorage.getItem("token");if(!t){alert("You must be logged in to delete a blog post.");return}(await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/blog/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({id:e})})).ok||alert("Error deleting blog"),n(t=>t.filter(t=>t.id!==e))},f=async(e,t,n,r)=>{console.log("Edit blog:",{title:t,content:n,thumbnail:r});let a=localStorage.getItem("token");if(!a){alert("You must be logged in to create a blog post.");return}let l=n.replace(/\n/g,"\n");(await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/blogs"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({id:e,title:t,content:l,thumbnail:r})})).ok?(alert("Blog post updated successfully!"),console.log(l)):alert("Error updating blog post"),i(null)},Z=()=>{c(!1),i(null)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(s.Z,{style:{marginTop:"3rem"},children:[(0,r.jsx)(d.Z,{variant:"h4",gutterBottom:!0,style:{color:e.palette.primary.main,textAlign:"center"},children:"Blog Posts"}),o&&(0,r.jsx)(B,{onSubmit:h,onCancel:Z}),l&&(0,r.jsx)(B,{onSubmit:f,onCancel:Z,data:l}),!o&&!l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{variant:"contained",color:e.palette.primary.main,onClick:()=>c(!0),style:{marginBottom:"1rem",float:"left"},children:"Create Blog"}),(0,r.jsx)(b.Z,{children:(0,r.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto"},children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(g.Z,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(p.Z,{children:"Thumbnail"}),(0,r.jsx)(p.Z,{children:"Title"}),(0,r.jsx)(p.Z,{children:"Created At"}),(0,r.jsx)(p.Z,{children:"Actions"})]})}),(0,r.jsx)(j.Z,{children:t.map(t=>(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(p.Z,{children:(0,r.jsx)("img",{src:t.thumbnail,alt:t.title,style:{width:"100px",height:"auto",objectFit:"cover"}})}),(0,r.jsx)(p.Z,{children:(0,r.jsx)(F(),{href:"/blog/".concat(t.id),passHref:!0,children:(0,r.jsx)(d.Z,{style:{color:e.palette.primary.main,cursor:"pointer"},children:t.title})})}),(0,r.jsx)(p.Z,{children:new Date(t.created_at).toLocaleDateString()}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(u.Z,{variant:"outlined",color:e.palette.primary.main,onClick:()=>i(t),style:{marginRight:"0.5rem"},children:"Edit"}),(0,r.jsx)(u.Z,{variant:"outlined",color:e.palette.error.main,onClick:()=>y(t.id),children:"Delete"})]})]},t.id))})]})})})]})]})})},_=e=>{let{itemData:t,handleSubmit:n,handleCancel:l}=e,[i,o]=(0,a.useState)((null==t?void 0:t.item_name)||""),[d,h]=(0,a.useState)((null==t?void 0:t.price)||0),[m,g]=(0,a.useState)((null==t?void 0:t.description)||""),[x,p]=(0,a.useState)((null==t?void 0:t.images)||""),[j,y]=(0,a.useState)(!0),Z=(0,c.useRouter)();return(0,a.useEffect)(()=>{localStorage.getItem("token")||Z.push("/admin-login")},[Z]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z,{}),(0,r.jsxs)(s.Z,{style:{paddingTop:"3rem",paddingBottom:"3rem",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,r.jsx)(s.Z,{style:{flex:"1",display:"flex",alignItems:"center",justifyContent:"flex-start"},children:(0,r.jsx)(T,{})}),(0,r.jsxs)(s.Z,{style:{flex:"2",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},children:[(0,r.jsx)("div",{style:{textAlign:"center",width:"100%",marginBottom:"1rem"},children:(0,r.jsx)(f.Z,{title:t?"Edit Store Item":"Create Store Item"})}),(0,r.jsx)(w.Z,{label:"Item Name",fullWidth:!0,value:i,onChange:e=>o(e.target.value),margin:"normal"}),(0,r.jsx)(w.Z,{label:"Price",type:"number",fullWidth:!0,value:d,onChange:e=>h(parseFloat(e.target.value)),margin:"normal"}),(0,r.jsx)(w.Z,{label:"Description",fullWidth:!0,multiline:!0,rows:4,value:m,onChange:e=>g(e.target.value),margin:"normal"}),(0,r.jsx)(w.Z,{label:"Image Links (separate with commas)",fullWidth:!0,value:x,onChange:e=>{let t=e.target.value;p(t),y(t.split(",").every(e=>""!==e.trim())||0===t.length)},margin:"normal",error:!j,helperText:j?"":"Please ensure links are properly separated with commas."}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1rem"},children:[(0,r.jsx)(u.Z,{variant:"contained",style:{marginRight:"1rem"},color:"primary",onClick:()=>n({id:(null==t?void 0:t.id)||0,item_name:i,price:d,description:m,images:x}),children:t?"Save":"Submit"}),(0,r.jsx)(u.Z,{variant:"outlined",color:"secondary",onClick:l,children:"Cancel"})]})]})]})]})},D=()=>{let[e,t]=(0,a.useState)([]),{theme:n}=(0,v.T)(),[l,i]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let e=await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/store"));t((await e.json()).results.map(e=>({...e,images:e.images.split(",")})))})()},[]);let h=e=>{c(e),i(!0)},y=async e=>{console.log("Delete item:",e);let n=localStorage.getItem("token");if(!n){alert("You must be logged in to delete a store item.");return}(await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/store/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({id:e})})).ok||alert("Error deleting item"),t(t=>t.filter(t=>t.id!==e)),alert("Item deleted successfully!")},f=async e=>{console.log("Submit item:",e);let t=localStorage.getItem("token");if(!t){alert("You must be logged in to create a store item.");return}null==o?(await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/store"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({item_name:e.item_name,price:e.price,description:e.description,images:e.images.split(",")})})).ok?alert("Item added to store successfully!"):alert("Error adding item to store"):null!=o&&((await fetch("".concat("https://savorsauce-backend.nathaniellybrand.workers.dev","/store"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({id:o.id,item_name:e.item_name,price:e.price,description:e.description,images:e.images})})).ok?alert("Item updated successfully!"):alert("Error updating item")),i(!1)};return(0,r.jsx)(s.Z,{style:{marginTop:"3rem"},children:l?(0,r.jsx)(_,{handleSubmit:f,handleCancel:()=>{c(null),i(!1)},itemData:o||void 0}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{variant:"contained",color:n.palette.primary.main,onClick:()=>{c(null),i(!0)},style:{marginBottom:"1rem"},children:"Create Item"}),(0,r.jsx)(b.Z,{children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)(g.Z,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(p.Z,{children:"Image"}),(0,r.jsx)(p.Z,{children:"Item Name"}),(0,r.jsx)(p.Z,{children:"Price"}),(0,r.jsx)(p.Z,{children:"Actions"})]})}),(0,r.jsx)(j.Z,{children:e.map(e=>(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(p.Z,{children:e.images&&e.images.length>0&&(0,r.jsx)("img",{src:e.images[0],alt:e.item_name,style:{width:"100px",height:"auto",objectFit:"cover"}})}),(0,r.jsx)(p.Z,{children:(0,r.jsx)(F(),{href:"/store/".concat(e.id),passHref:!0,children:(0,r.jsx)(d.Z,{style:{color:n.palette.primary.main,cursor:"pointer"},children:e.item_name})})}),(0,r.jsxs)(p.Z,{children:["$",e.price.toFixed(2)]}),(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(u.Z,{variant:"outlined",color:"primary",onClick:()=>h(e),style:{marginRight:"0.5rem"},children:"Edit"}),(0,r.jsx)(u.Z,{variant:"outlined",color:"secondary",onClick:()=>y(e.id),children:"Delete"})]})]},e.id))})]})})]})})},P=()=>{let[e,t]=(0,a.useState)(0),{theme:n}=(0,v.T)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z,{}),(0,r.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:n.palette.background.main,paddingTop:"4.5rem"},children:(0,r.jsxs)(i.Z,{value:e,onChange:(e,n)=>{t(n)},centered:!0,textColor:n.palette.primary.main,indicatorColor:n.palette.primary.main,children:[(0,r.jsx)(o.Z,{label:"Store"}),(0,r.jsx)(o.Z,{label:"Blog"}),(0,r.jsx)(o.Z,{label:"Bucket"})]})}),(0,r.jsxs)(s.Z,{maxWidth:"md",style:{marginTop:"2rem"},children:[0===e&&(0,r.jsx)(D,{}),1===e&&(0,r.jsx)(A,{}),2===e&&(0,r.jsx)(Z,{})]})]})}}},function(e){e.O(0,[365,243,645,338,816,60,888,774,179],function(){return e(e.s=9748)}),_N_E=e.O()}]);